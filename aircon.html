<!DOCTYPE html> 
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>冷氣MENU</title>
    <style>
        body {
            text-align: center;
            font-family: "Chocolate Classical Sans", sans-serif;
            font-size: 23px;
        }
        .inline {
            display: inline-block;
            margin-right: 10px;
        }
        .block {
            display: block;
            margin-top: 10px;
        }
        #result {
            font-size: 30px;
            margin-top: 15px;
        }
        #sumDisplay {
            font-size: 40px;
            margin-top: 20px;
        }
        .error {
            color: red;
        }
        /* 調整選項的字體大小 */
        select {
            font-size: 18px; /* 您可以調整這個值 */
        }
    </style>
    <script>
        function showSubOptions() {
            var mainSelect = document.getElementById("options");
            var subSelect = document.getElementById("sub-options");
            var subLabel = document.getElementById("sub-label");
            var thirdSelect = document.getElementById("third-options");
            var thirdLabel = document.getElementById("third-label");
            var checkboxDiv = document.getElementById("checkbox-div");
            var result = document.getElementById("result");
            var sumDisplay = document.getElementById("sumDisplay");

            // 隱藏和清空下方所有內容
            subSelect.style.display = "none";
            subLabel.style.display = "none";
            thirdSelect.style.display = "none"; 
            thirdLabel.style.display = "none";
            checkboxDiv.style.display = "none"; 
            result.innerHTML = ""; 
            sumDisplay.innerHTML = ""; 

            subSelect.value = "";
            thirdSelect.value = "";

            result.classList.remove("error");
            result.innerHTML = ""; 
          
            if (mainSelect.value) {
                subSelect.innerHTML = 
                    '<option value="">請選擇</option>' +
                    '<option value="1">一對一</option>' +
                    '<option value="2">一對多</option>';
                subSelect.style.display = "inline-block"; 
                subLabel.style.display = "inline-block"; 
            }
        }

        function showThirdOptions() {
            var mainSelect = document.getElementById("options");
            var subSelect = document.getElementById("sub-options");
            var thirdSelect = document.getElementById("third-options");
            var thirdLabel = document.getElementById("third-label");
            var result = document.getElementById("result");
            var sumDisplay = document.getElementById("sumDisplay");
            var checkboxDiv = document.getElementById("checkbox-div");
            var checkboxes = document.getElementById("checkboxes");

            // 隱藏和清空下方所有內容
            thirdSelect.style.display = "none"; 
            thirdLabel.style.display = "none";
            checkboxDiv.style.display = "none"; 
            result.innerHTML = ""; 
            sumDisplay.innerHTML = ""; 
            checkboxes.innerHTML = ""; // 清空勾選框

            if (mainSelect.value === "option1") {
                if (subSelect.value === "1") {
                    thirdSelect.innerHTML = 
                        '<option value="">請選擇</option>' +
                        '<option value="E">室外機15噸、室內機15噸 (價格: 55000元)</option>' +
                        '<option value="F">室外機30噸、室內機15噸 (價格: 90000元)</option>';
                } else if (subSelect.value === "2") {
                    thirdSelect.innerHTML = 
                        '<option value="">請選擇</option>' +
                        '<option value="G">室外機15噸 (價格: 55000元)</option>' +
                        '<option value="H">室外機60噸 (價格: 150000元)</option>';
                }
            } else if (mainSelect.value === "option2") {
                if (subSelect.value === "1") {
                    thirdSelect.innerHTML = 
                        '<option value="">請選擇</option>' +
                        '<option value="A">室外機15噸 (價格: 50000元)</option>' +
                        '<option value="B">室外機20噸 (價格: 70000元)</option>';
                } else if (subSelect.value === "2") {
                    thirdSelect.innerHTML = 
                        '<option value="">請選擇</option>' +
                        '<option value="C">室外機15噸 (價格: 50000元)</option>' +
                        '<option value="D">室外機40噸 (價格: 120000元)</option>';
                }
            } else if (mainSelect.value === "option3") {
                if (subSelect.value === "1") {
                    thirdSelect.innerHTML = 
                        '<option value="">請選擇</option>' +
                        '<option value="I">室外機15噸 (價格: 60000元)</option>' +
                        '<option value="J">室外機40噸 (價格: 110000元)</option>';
                } else if (subSelect.value === "2") {
                    thirdSelect.innerHTML = 
                        '<option value="">請選擇</option>' +
                        '<option value="K">室外機15噸 (價格: 60000元)</option>' +
                        '<option value="L">室外機80噸 (價格: 200000元)</option>';
                }
            }

            if (subSelect.value) {
                thirdSelect.style.display = "inline-block"; 
                thirdLabel.style.display = "inline-block"; 
            }
        }

        function displayCheckboxes() {
            var subSelect = document.getElementById("sub-options");
            var thirdSelect = document.getElementById("third-options");
            var checkboxDiv = document.getElementById("checkbox-div");
            var checkboxes = document.getElementById("checkboxes");
            var result = document.getElementById("result");
            var sumDisplay = document.getElementById("sumDisplay");

            // 隱藏結果和總計顯示
            result.classList.remove("error");
            result.innerHTML = ""; 
            sumDisplay.innerHTML = ""; 

            checkboxDiv.style.display = "none"; 
            checkboxes.innerHTML = ""; // 清空勾選框

            if (subSelect.value === "2") {
                checkboxDiv.style.display = "block"; 
                checkboxes.innerHTML = 
                    '<input type="checkbox" id="option1" value="10" data-price="25000" onchange="updateResult()">' +
                    '<label for="option1">室內機10噸 (價格: 25000元)</label><br>' +
                    '<input type="checkbox" id="option2" value="20" data-price="40000" onchange="updateResult()">' +
                    '<label for="option2">室內機20噸 (價格: 40000元)</label><br>' +
                    '<input type="checkbox" id="option3" value="30" data-price="60000" onchange="updateResult()">' +
                    '<label for="option3">室內機30噸 (價格: 60000元)</label><br>';
            }

            // 新增顯示選擇的第三階層選項結果
            if (subSelect.value === "1" && thirdSelect.value) {
                result.innerHTML = "選擇的第三階層選項: " + thirdSelect.options[thirdSelect.selectedIndex].text;
            } else {
                result.innerHTML = ""; // 清空結果顯示
            }
        }

        function updateResult() {
            var subSelect = document.getElementById("sub-options");
            var thirdSelect = document.getElementById("third-options");
            var result = document.getElementById("result");
            var sumDisplay = document.getElementById("sumDisplay");

            var indoorUnitTonnage = 0;
            var selectedPrice = 0;

            if (subSelect.value === "1") {
                var radios = document.getElementsByName("options");
                for (var i = 0; i < radios.length; i++) {
                    if (radios[i].checked) {
                        indoorUnitTonnage += parseInt(radios[i].value);
                        selectedPrice += parseInt(radios[i].getAttribute("data-price"));
                    }
                }
            } else {
                var checkboxes = document.querySelectorAll("#checkboxes input[type='checkbox']:checked");
                checkboxes.forEach(function(checkbox) {
                    indoorUnitTonnage += parseInt(checkbox.value);
                    selectedPrice += parseInt(checkbox.getAttribute("data-price"));
                });
            }

            var outdoorUnit = thirdSelect.value;
            var outdoorUnitTonnage = 0;
            var outdoorUnitPrice = 0;

            if (outdoorUnit) {
                var outdoorOptions = {
                    "A": { tonnage: 15, price: 50000 },
                    "B": { tonnage: 20, price: 70000 },
                    "C": { tonnage: 15, price: 50000 },
                    "D": { tonnage: 40, price: 120000 },
                    "E": { tonnage: 15, price: 55000 },
                    "F": { tonnage: 30, price: 90000 },
                    "G": { tonnage: 15, price: 55000 },
                    "H": { tonnage: 60, price: 150000 },
                    "I": { tonnage: 15, price: 60000 },
                    "J": { tonnage: 40, price: 110000 },
                    "K": { tonnage: 15, price: 60000 },
                    "L": { tonnage: 80, price: 200000 }
                };

                outdoorUnitTonnage = outdoorOptions[outdoorUnit].tonnage;
                outdoorUnitPrice = outdoorOptions[outdoorUnit].price;
            }

            // 判斷室內機和室外機的總噸位
            if (indoorUnitTonnage > outdoorUnitTonnage) {
                result.innerHTML = "室內機的總噸位超過室外機的噸位!";
                result.classList.add("error");
                sumDisplay.innerHTML = ""; 
            } else {
                result.classList.remove("error");
                result.innerHTML = "室內機總噸位: " + indoorUnitTonnage + "噸" + 
                    "<br>室外機噸位: " + outdoorUnitTonnage + "噸" + 
                    "<br>價格總計: " + (selectedPrice + outdoorUnitPrice) + "元";
                sumDisplay.innerHTML = "總計: " + (selectedPrice + outdoorUnitPrice) + "元";
            }
        }
    </script>
</head>
<body>
    <h1>冷氣MENU</h1>

    <div class="block">
        <label for="options" class="inline">選擇品牌:</label>
        <select id="options" onchange="showSubOptions()">
            <option value="">請選擇</option>
            <option value="option1">大金</option>
            <option value="option2">日立</option>
            <option value="option3">國際</option>
        </select>
    </div>

    <div class="block">
        <label id="sub-label" for="sub-options" class="inline" style="display: none;">選擇型號:</label>
        <select id="sub-options" onchange="showThirdOptions()" style="display: none;">
            <option value="">請選擇</option>
        </select>
    </div>

    <div class="block">
        <label id="third-label" for="third-options" class="inline" style="display: none;">選擇室外機:</label>
        <select id="third-options" onchange="displayCheckboxes()" style="display: none;">
            <option value="">請選擇</option>
        </select>
    </div>

    <div id="checkbox-div" style="display: none;">
        <h3>選擇室內機:</h3>
        <div id="checkboxes"></div>
    </div>

    <div id="result" class="error"></div>
    <div id="sumDisplay"></div>
</body>
</html>
